<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="static/docstyle.css">
    <script src="https://unpkg.com/phosphor-icons"></script>
    <title>Custom app</title>
</head>
<body>
	<div class="frnt">
        <header class="header">
			<div class="header-content responsive-wrapper">
				<div class="header-logo">
					<a href="#" style="text-decoration: none;">
						<div class="logoonly">
							<img src="static/dashpics/logo.png" />
						</div>
						<h2 class="logotext">CBAAP</h2>
					</a>
				</div>
				<div class="header-navigation">
					<nav class="header-navigation-links">
						<a href="#"> Home </a>
						<a href="#"> History </a>
					</nav>
					<div class="header-navigation-actions">
						
						<div class="toggle">
                            <div class="deco">
                                <div class="deco-1"></div>
                                <div class="deco-2"></div>
                            </div>
                            <div class="wrapper">
                                <div class="text">RAG</div><input id="checkbox" type="checkbox" checked="checked" />
								
                                <label class="button" for="checkbox"><div class="dot">
    
                                </div>
                            </label>
                            </div>
                        </div>
						<div class="toolkitt" style="display: flex;gap: 2rem;">
							<div class="example-elements">
    
		
							  <div class="info-wrapper">
					
								<p 
								   data-tooltip="Enable RAG (Retrieval Augmented Generation) to enhance chatbot responses with advanced retrieval and generation techniques. Disabling RAG will revert to standard response generation"
								   data-tooltip-location="bottom">
								   <span style="display: inline-block; font-size: 14px; color: #2c2c2c; background: #ffffff; border-radius: 20rem; padding: 2px 8px;border: 2px solid #535353">?</span>
								</p>
							  </div>
							
							</div>
							<div style="margin-right:1.6rem">
							</div>
						
	
							<a href="#" class="button" onclick="logger()" style="margin-top:0.5rem">
								<i class="ph-article-bold"></i>
								<span>logger</span>
							</a>
						
							
							<a id="user-icon" class="user-icon" href="#" class="avatar">
								<img style="margin-top:0.6rem" src="https://images.rawpixel.com/image_social_square/czNmcy1wcml2YXRlL3Jhd3BpeGVsX2ltYWdlcy93ZWJzaXRlX2NvbnRlbnQvbHIvcGYtaWNvbjQtamlyMjA2NC1wb3ItbC5qcGc.jpg" alt="" />
							</a>
							
						
					</div>
				</div>
				
			</div>
		</header>
    </div>
    
    <div class="bdy1">
        <div class="wraps">
            <div class="left">
                <div id="sessions">
                    <button id="newsns" onclick="newSession('{{ session_name_end }}')">New session</button>
                </div>
                <!-- <div class="button-container">
                    <div id="senlist">
                        <button class="session_item" onclick="loadSession('{{ session_name }}')">{{ session_name }}</button>
                    </div>
                </div> -->

                <div class="button-container">
                    <div id="senlist">
                        {% for session_name in session_names %}
                        <button class="session_item" onclick="loadSession('{{ session_name }}')">{{ session_name }}</button>
                        {% endfor %}
                    </div>
                </div>
                
            </div>
            <div id="right">
                <div id="chat-container">
    
                    <div id="{{ session_name }}">    
                        <div id="chat-title">{{ app_name }}</div>
                        <div id="chat-display"></div>
                        <div id="user-input-container">
                            <input type="text" id="user-input" placeholder="Type your message...">
                            <!-- <button onclick="sendMessage()">Send</button> -->
                            <a id="clk" onclick="sendMessage()" class="icon-button">
                                <i class="ph-arrow-up-bold"></i>
                            </a>
                        </div>
                        <!-- <!-- <div id="loader-active">hi</div> -->
                        <div id="loader"></div>
                        <!-- <div class="lds-hourglass"></div> -->
                    </div>

                </div>
            </div>
        </div>

        
    </div>
        
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{{ url_for('static', filename='docchat_script_new.js') }}"></script>
    <script>
        function logout() {
			// Send an AJAX request to the logout route
			fetch('/logout', {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json',
				},
				// You may include a CSRF token in the request if your application uses CSRF protection
				// body: JSON.stringify({ csrf_token: 'your_csrf_token' }),
			})
			.then(response => {
				// Check if the logout was successful
				if (response.ok) {
					// Redirect to the login page or perform any other desired action
					window.location.href = '/login';
				} else {
					// Handle error cases
					console.error('Logout failed');
				}
			})
			.catch(error => {
				// Handle network errors
				console.error('Network error:', error);
			});
		}
    </script>

</body>
</html>